<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lifeng Ren">
<meta name="dcterms.date" content="2023-09-07">

<title>Lifeng Ren - Lecture 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Lifeng Ren</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teaching">    
        <li class="dropdown-header">R-Review-2023</li>
        <li>
    <a class="dropdown-item" href="./lec0.html" rel="" target="">
 <span class="dropdown-text">Lecture 0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec1.html" rel="" target="">
 <span class="dropdown-text">Lecture 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec2.html" rel="" target="">
 <span class="dropdown-text">Lecture 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec3.html" rel="" target="">
 <span class="dropdown-text">Lecture 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec4.html" rel="" target="">
 <span class="dropdown-text">Lecture 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec5.html" rel="" target="">
 <span class="dropdown-text">Lecture 5</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lec0.html">R-Review-2023</a></li><li class="breadcrumb-item"><a href="./lec4.html">Lecture 4</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R-Review-2023</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 0</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#course-updates" id="toc-course-updates" class="nav-link active" data-scroll-target="#course-updates"><span class="header-section-number">1</span> Course Updates</a></li>
  <li><a href="#recap-from-yesterday" id="toc-recap-from-yesterday" class="nav-link" data-scroll-target="#recap-from-yesterday"><span class="header-section-number">2</span> Recap from Yesterday</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">3</span> Introduction</a></li>
  <li><a href="#mathematical-statistics-in-r" id="toc-mathematical-statistics-in-r" class="nav-link" data-scroll-target="#mathematical-statistics-in-r"><span class="header-section-number">4</span> Mathematical Statistics in R</a>
  <ul class="collapse">
  <li><a href="#matrix-caculations-warm-up-and-review" id="toc-matrix-caculations-warm-up-and-review" class="nav-link" data-scroll-target="#matrix-caculations-warm-up-and-review"><span class="header-section-number">4.1</span> Matrix Caculations (Warm up and Review)</a></li>
  <li><a href="#sampling" id="toc-sampling" class="nav-link" data-scroll-target="#sampling"><span class="header-section-number">4.2</span> Sampling</a></li>
  <li><a href="#replication" id="toc-replication" class="nav-link" data-scroll-target="#replication"><span class="header-section-number">4.3</span> Replication</a></li>
  <li><a href="#discrete-random-variables-and-distribution" id="toc-discrete-random-variables-and-distribution" class="nav-link" data-scroll-target="#discrete-random-variables-and-distribution"><span class="header-section-number">4.4</span> Discrete Random Variables and Distribution</a></li>
  <li><a href="#continous-random-variables-and-distribution" id="toc-continous-random-variables-and-distribution" class="nav-link" data-scroll-target="#continous-random-variables-and-distribution"><span class="header-section-number">4.5</span> Continous Random Variables and Distribution</a></li>
  <li><a href="#monte-carlo-simulation" id="toc-monte-carlo-simulation" class="nav-link" data-scroll-target="#monte-carlo-simulation"><span class="header-section-number">4.6</span> Monte Carlo Simulation</a></li>
  <li><a href="#r-code-with-loops-and-runif" id="toc-r-code-with-loops-and-runif" class="nav-link" data-scroll-target="#r-code-with-loops-and-runif"><span class="header-section-number">4.7</span> R Code with loops and <code>runif()</code>:</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="header-section-number">4.8</span> Exercise</a></li>
  <li><a href="#expected-values-variance" id="toc-expected-values-variance" class="nav-link" data-scroll-target="#expected-values-variance"><span class="header-section-number">4.9</span> Expected Values, Variance</a></li>
  <li><a href="#plot-the-distribution-of-random-variable" id="toc-plot-the-distribution-of-random-variable" class="nav-link" data-scroll-target="#plot-the-distribution-of-random-variable"><span class="header-section-number">4.10</span> Plot the distribution of random variable</a></li>
  </ul></li>
  <li><a href="#regression-related-functions-in-r" id="toc-regression-related-functions-in-r" class="nav-link" data-scroll-target="#regression-related-functions-in-r"><span class="header-section-number">5</span> <strong>Regression-Related Functions in R</strong></a></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference"><span class="header-section-number">6</span> Reference</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lifeng Ren </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="course-updates" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Course Updates</h1>
<ul>
<li><p>Lecture 2 and Lecture 3’s link is now available on GitHub</p></li>
<li><p>Lecture 3’s project solution has been updated.</p></li>
<li><p>Any Questions? Comments? Suggestions?</p></li>
</ul>
</section>
<section id="recap-from-yesterday" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Recap from Yesterday</h1>
<ul>
<li><p>Compare with <code>1:m</code>, <code>m:1</code>, <code>1:1</code> in STATA</p></li>
<li><p>Data Reshaping</p></li>
<li><p>Library and Packages</p></li>
<li><p>Data Standardization</p></li>
<li><p>Unique Identifier</p></li>
<li><p>Basic Data Analysis and Visualization in R</p></li>
<li><p>A review project for Day 1 and Day 2</p>
<ul>
<li>Don’t worry if you did not finish it</li>
<li>Many things will be repeated today and tomorrow.</li>
<li>If we end up earlier today, you are feel free to stay and do it.</li>
</ul></li>
</ul>
</section>
<section id="introduction" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Introduction</h1>
<p>In this lecture, we’ll build on what we’ve already covered by placing it in an economic context. This approach is designed to facilitate a seamless transition into your first-year econometrics class. You may notice that some content in this lecture mirrors or closely resembles previous lessons. This repetition is intentional, aiming to reinforce your understanding and help you consolidate the concepts we’ve explored.</p>
<p>In this class, I won’t directly provide the code. Instead, you’ll be using the <code>Rmd</code> file I’ve supplied to craft your code. We’ll progress to subsequent topics only after everyone has successfully executed their code.</p>
<p><strong>Topics</strong></p>
<ul>
<li><p>Mathematical Statistics in R</p></li>
<li><p>Intermediate Applied Econometrics (Regression Related) in R</p></li>
</ul>
<hr>
</section>
<section id="mathematical-statistics-in-r" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Mathematical Statistics in R</h1>
<section id="matrix-caculations-warm-up-and-review" class="level2 tabset" data-number="4.1">
<h2 class="tabset anchored" data-number="4.1" data-anchor-id="matrix-caculations-warm-up-and-review"><span class="header-section-number">4.1</span> Matrix Caculations (Warm up and Review)</h2>
<p>This is something we’ve learned before. So, go ahead and use the rmd file named <code>lec4_stu.Rmd</code> to use R to represent, calculate the following Math Expressions.</p>
<hr>
<section id="mathematical-expression" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="mathematical-expression"><span class="header-section-number">4.1.1</span> Mathematical Expression</h3>
<p><strong>Matrix Creation</strong> <span class="math display">\[
A =
\begin{bmatrix}
    1 &amp; 2 \\
    3 &amp; 4 \\
\end{bmatrix}
\]</span></p>
<p>Create the matrix in two ways:</p>
<ul>
<li><p><code>matrix(c(), nrow=2)</code></p></li>
<li><p>generate an empty matrix and use a loop to fill in each entry of <span class="math inline">\(A\)</span></p></li>
</ul>
<hr>
<p><strong>Matrix Addition</strong> Given two matrices <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, <span class="math display">\[
C = A + B
\]</span></p>
<hr>
<p><strong>Matrix Multiplication with Scalar</strong></p>
<p>Given scalar <span class="math inline">\(k\)</span> and matrix <span class="math inline">\(A\)</span>, <span class="math display">\[
D = k \times A
\]</span></p>
<hr>
<p><strong>Matrix Dot Product</strong> Given matrices <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, <span class="math display">\[
E = A \cdot B
\]</span></p>
<hr>
<p><strong>Matrix Transpose</strong> Given matrix <span class="math inline">\(A\)</span>, <span class="math display">\[
F = A^T
\]</span></p>
<hr>
<p><strong>Determinant and Inverse</strong> Given matrix <span class="math inline">\(A\)</span>, <span class="math display">\[
\text{det}(A)
\]</span></p>
<hr>
<p>Given matrix <span class="math inline">\(A\)</span> (and assuming it’s invertible), <span class="math display">\[
G = A^{-1}
\]</span></p>
<hr>
<p><strong>Eigenvalues and Eigenvectors</strong></p>
<p>Given matrix <span class="math inline">\(A\)</span>, Eigenvalues (<span class="math inline">\(\lambda\)</span>) and Eigenvectors (<span class="math inline">\(v\)</span>) satisfy: <span class="math display">\[
A v = \lambda v
\]</span></p>
<hr>
<p><strong>Double Sum with Indexing</strong> Let’s consider two matrices, <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, and calculate the double sum:</p>
<p><span class="math display">\[
\sum_i \sum_j A_{ij} + B_{ij}
\]</span></p>
<p><span class="math inline">\(\sum_i\)</span> is iterating through rows, <span class="math inline">\(\sum_j\)</span> is iterating columns. Suppose: <span class="math display">\[
A =
\begin{bmatrix}
    1 &amp; 2 \\
    3 &amp; 4 \\
\end{bmatrix}
\quad , \quad B = \begin{bmatrix}
    5 &amp; 6 \\
    7 &amp; 8 \\
\end{bmatrix}
\]</span></p>
<p>Note: 1)You should get a single value. 2)Do it in a customized function named as <code>double_sum</code>.</p>
<hr>
</section>
<section id="r-code" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="r-code"><span class="header-section-number">4.1.2</span> R Code</h3>
<p><strong>Matrix Creation</strong></p>
<ol type="1">
<li><strong>Using <code>matrix()</code></strong></li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    2
[2,]    3    4</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><strong>Using an empty matrix and a loop</strong></li>
</ol>
<p>To do this, we first create an empty 2x2 matrix and then use nested loops to assign values to its entries.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>A_method2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>)  <span class="co"># Create an empty 2x2 matrix</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)  <span class="co"># Values to be filled into the matrix</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(A_method2)) {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(A_method2)) {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    A_method2[i, j] <span class="ot">&lt;-</span> values[index]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    index <span class="ot">&lt;-</span> index <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(A_method2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    2
[2,]    3    4</code></pre>
</div>
</div>
<p>Both methods will yield the same matrix <span class="math inline">\(A\)</span>.</p>
<p><strong>Matrix Addition</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>C <span class="ot">&lt;-</span> A <span class="sc">+</span> B</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(C)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    3    5
[2,]    3    5</code></pre>
</div>
</div>
<p><strong>Matrix Multiplication with Scalar</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>D <span class="ot">&lt;-</span> k <span class="sc">*</span> A</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(D)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2    4
[2,]    6    8</code></pre>
</div>
</div>
<p><strong>Matrix Dot Product</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>E <span class="ot">&lt;-</span> A <span class="sc">%*%</span> B</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(E)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2    5
[2,]    6   13</code></pre>
</div>
</div>
<p><strong>Matrix Transpose</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>F <span class="ot">&lt;-</span> <span class="fu">t</span>(A)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    3
[2,]    2    4</code></pre>
</div>
</div>
<p><strong>Determinants and Inverse</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>det_val <span class="ot">&lt;-</span> <span class="fu">det</span>(A)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(det_val)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="fu">solve</span>(A)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(G)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,] -2.0  1.0
[2,]  1.5 -0.5</code></pre>
</div>
</div>
<p><strong>Eigenvalues and Eigenvectors</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>eigen_decomp <span class="ot">&lt;-</span> <span class="fu">eigen</span>(A)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>eigen_values <span class="ot">&lt;-</span> eigen_decomp<span class="sc">$</span>values</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>eigen_vectors <span class="ot">&lt;-</span> eigen_decomp<span class="sc">$</span>vectors</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(eigen_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.3722813 -0.3722813</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(eigen_vectors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]
[1,] -0.4159736 -0.8245648
[2,] -0.9093767  0.5657675</code></pre>
</div>
</div>
<p><strong>Double Sums</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>double_sum <span class="ot">&lt;-</span> <span class="cf">function</span>(matrix1, matrix2) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize result</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Double loop to sum elements</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(matrix1)) {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(matrix1)) {</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      result <span class="ot">&lt;-</span> result <span class="sc">+</span> matrix1[i, j] <span class="sc">+</span> matrix2[i, j]</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample matrices</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>), <span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function to compute the double sum</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="fu">double_sum</span>(A, B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="sampling" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sampling"><span class="header-section-number">4.2</span> Sampling</h2>
<p>In R, the <code>sample()</code> function allows us to generate random samples. Imagine we have an urn containing 12 distinct colored balls. If we were to draw a ball 10 times, replacing the ball after each draw, we can simulate this process to create a sample.</p>
<p>Since it is randomly generating the sample for us, how can we keep track on it?</p>
<p>Use the <code>set.seed()</code> function.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the 12 distinct colored balls</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Green"</span>, <span class="st">"Yellow"</span>, <span class="st">"Purple"</span>, <span class="st">"Orange"</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">"Pink"</span>, <span class="st">"Brown"</span>, <span class="st">"Black"</span>, <span class="st">"White"</span>, <span class="st">"Gray"</span>, <span class="st">"Cyan"</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw 10 balls with replacement</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>sampled_colors <span class="ot">&lt;-</span> <span class="fu">sample</span>(colors, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>sampled_colors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Green"  "Green"  "White"  "Blue"   "Orange" "Gray"   "Purple" "Yellow"
 [9] "Orange" "Black" </code></pre>
</div>
</div>
<hr>
<p>To calculate the probability of drawing any single color from the urn when drawing one ball (without replacement), you can use basic probability principles.</p>
<p>Given that there are 12 distinct colored balls in the urn, the probability <span class="math inline">\(P\)</span> of drawing any one specific color (let’s say “Red”) in one draw is:</p>
<p><span class="math display">\[
P(\text{Red}) = \frac{\text{Number of Red balls}}{\text{Total number of balls}}
\]</span></p>
<p>If each color appears only once in the urn, then:</p>
<p><span class="math display">\[
P(\text{Red}) = \frac{1}{12}
\]</span></p>
<p>This is true for any individual color in the urn, assuming each color is unique and there’s only one ball of each color.</p>
<p>To calculate this in R:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of distinct colored balls</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>total_balls <span class="ot">&lt;-</span> <span class="fu">length</span>(colors)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Probability of drawing one specific color</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>probability_single_color <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> total_balls</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>probability_single_color</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08333333</code></pre>
</div>
</div>
<p>This will give you the probability of drawing any single specific color from the urn in one draw.</p>
<hr>
</section>
<section id="replication" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="replication"><span class="header-section-number">4.3</span> Replication</h2>
<p>The <code>rep()</code> function in R stands for “replicate.” It is used to replicate the values of vectors or lists.</p>
<p>Here’s a brief explanation of its functionality:</p>
<ol type="1">
<li><strong>Basic Replication</strong>: If you want to replicate a single value multiple times, you can use <code>rep()</code>:</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="dv">5</span>, <span class="at">times =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 5 5</code></pre>
</div>
</div>
<p>This creates a vector with the number 5 repeated three times.</p>
<ol start="2" type="1">
<li><strong>Replicating Vectors</strong>: You can also replicate entire vectors:</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 1 2 3</code></pre>
</div>
</div>
<p>This replicates the entire vector <code>1:3</code> two times.</p>
<ol start="3" type="1">
<li><strong>Different Replications for Each Element</strong>: By using the <code>each</code> argument, you can specify how many times each element should be replicated:</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 2 2 3 3</code></pre>
</div>
</div>
<p>This replicates each element of the vector <code>1:3</code> two times.</p>
<ol start="4" type="1">
<li><strong>Combining <code>times</code> and <code>each</code></strong>: You can also combine both <code>times</code> and <code>each</code> for more complex patterns:</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">times =</span> <span class="dv">2</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 2 2 2 1 1 1 2 2 2</code></pre>
</div>
</div>
<p>Here, each element of the vector <code>1:2</code> is replicated three times, and then the entire pattern is replicated twice.</p>
<p>In the context of the urn example, <code>rep()</code> was used to represent the contents of the urn by replicating specific colors according to their quantities. For instance, if the urn had 3 Red balls, 2 Blue balls, and 1 Green ball, we would use <code>rep()</code> to create a vector representing this distribution:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>urn_contents <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Green"</span>), <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This would produce a vector: <code>Red Red Red Blue Blue Green</code>.</p>
</section>
<section id="discrete-random-variables-and-distribution" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="discrete-random-variables-and-distribution"><span class="header-section-number">4.4</span> Discrete Random Variables and Distribution</h2>
<p>In many cases, you will see <span class="math inline">\(X \sim (,)\)</span>, which is typically used to denote that random variable <span class="math inline">\(X\)</span> follows a certain distribution.</p>
<p>To describe a discrete random variable and its distribution, you specify: 1. The set of possible values it can take. 2. The probability associated with each value.</p>
<p>Let’s illustrate this with two common discrete probability distributions: the Bernoulli distribution and the Binomial distribution.</p>
<section id="bernoulli-distribution" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="bernoulli-distribution"><span class="header-section-number">4.4.1</span> Bernoulli Distribution:</h3>
<p>A Bernoulli random variable <span class="math inline">\(X\)</span> can take on two values, usually 0 and 1, with probabilities <span class="math inline">\(p\)</span> and <span class="math inline">\(1-p\)</span>, respectively. This distribution describes a single experiment with two outcomes, often termed “success” and “failure”.</p>
<p>Notation: <span class="math inline">\(X \sim \text{Bernoulli}(p)\)</span></p>
</section>
<section id="binomial-distribution" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="binomial-distribution"><span class="header-section-number">4.4.2</span> Binomial Distribution:</h3>
<p>A Binomial random variable <span class="math inline">\(X\)</span> represents the number of successes in <span class="math inline">\(n\)</span> Bernoulli trials. Each trial is independent, and the probability of success remains constant across trials.</p>
<p>Notation: <span class="math inline">\(X \sim \text{Binomial}(n, p)\)</span></p>
<p>In R, you can work with these distributions using functions like <code>dbinom()</code>, <code>pbinom()</code>, <code>qbinom()</code>, and <code>rbinom()</code> for the Binomial distribution, and similar functions for other distributions. For example,</p>
</section>
<section id="binomial-distribution-1" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="binomial-distribution-1"><span class="header-section-number">4.4.3</span> Binomial Distribution:</h3>
<p>Generating a binomial random variable with <span class="math inline">\(n = 5\)</span> and <span class="math inline">\(p = 0.5\)</span>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="dv">1</span>, <span class="at">size=</span><span class="dv">5</span>, <span class="at">prob=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="continous-random-variables-and-distribution" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="continous-random-variables-and-distribution"><span class="header-section-number">4.5</span> Continous Random Variables and Distribution</h2>
<p>Unlike discrete random variables, which take on a finite or countably infinite number of distinct values, continuous random variables can take on an uncountably infinite number of possible values. This means they can take on any value within a specified range.</p>
<p>For a continuous random variable, you specify: 1. The set of possible values it can take, which is usually an interval or union of intervals on the real line. 2. The probability density function (pdf) which provides the likelihood of the variable lying within a particular range.</p>
<p>Let’s illustrate this with two common continuous probability distributions: the Uniform distribution and the Normal distribution.</p>
<section id="uniform-distribution" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="uniform-distribution"><span class="header-section-number">4.5.1</span> Uniform Distribution:</h3>
<p>A continuous random variable <span class="math inline">\(X\)</span> that is uniformly distributed takes on values within a specified range <span class="math inline">\([a, b]\)</span> with equal probability.</p>
<p>Notation: <span class="math inline">\(X \sim U(a, b)\)</span></p>
<p>Probability Density Function (pdf): <span class="math display">\[
f(x) = \begin{cases}
\frac{1}{b-a} &amp; \text{for } a \leq x \leq b \\
0 &amp; \text{otherwise}
\end{cases}
\]</span></p>
</section>
<section id="normal-distribution" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="normal-distribution"><span class="header-section-number">4.5.2</span> Normal Distribution:</h3>
<p>A normal (or Gaussian) random variable <span class="math inline">\(X\)</span> has a bell-shaped probability density. It is characterized by two parameters: the mean <span class="math inline">\(\mu\)</span> and the variance <span class="math inline">\(\sigma^2\)</span>.</p>
<p>Notation: <span class="math inline">\(X \sim N(\mu, \sigma^2)\)</span></p>
<p>Probability Density Function (pdf):</p>
<p><span class="math display">\[
f(x) = \frac{1}{\sqrt{2\pi\sigma^2}} \exp \left( -\frac{(x-\mu)^2}{2\sigma^2} \right)
\]</span></p>
<p>In R, you can work with these distributions using functions like <code>dunif()</code>, <code>punif()</code>, <code>qunif()</code>, and <code>runif()</code> for the Uniform distribution, and <code>dnorm()</code>, <code>pnorm()</code>, <code>qnorm()</code>, and <code>rnorm()</code> for the Normal distribution.</p>
</section>
<section id="example-normal-distribution" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="example-normal-distribution"><span class="header-section-number">4.5.3</span> Example: Normal Distribution</h3>
<p>Generating a normal random variable with <span class="math inline">\(\mu = 0\)</span> and <span class="math inline">\(\sigma^2 = 1\)</span>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean=</span><span class="dv">0</span>, <span class="at">sd=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.280555</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="monte-carlo-simulation" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="monte-carlo-simulation"><span class="header-section-number">4.6</span> Monte Carlo Simulation</h2>
<p>Monte Carlo method by approximating the value of <span class="math inline">\(\pi\)</span> using a simple geometric approach. This is a classic example of Monte Carlo simulation.</p>
<p><strong>Concept:</strong></p>
<p>Imagine a circle inscribed inside a square. The ratio of their areas is <span class="math inline">\(\frac{\pi r^2}{(2 r)^2}=\frac{\pi}{4}\)</span>. If we randomly throw points into the square, the probability that a point lands inside the circle is <span class="math inline">\(\frac{\pi}{4}\)</span> . Therefore, <span class="math inline">\(\pi \approx 4 \times\)</span> (number of points inside the circle) / (total number of points thrown).</p>
<p><strong>Steps:</strong> 1. Randomly generate points inside the square. 2. Determine how many of those points fall inside the circle. 3. Approximate <span class="math inline">\(\pi\)</span> using the ratio of points inside the circle to the total points.</p>
</section>
<section id="r-code-with-loops-and-runif" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="r-code-with-loops-and-runif"><span class="header-section-number">4.7</span> R Code with loops and <code>runif()</code>:</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># for reproducibility</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of random points</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>n_points <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Counter for points inside the circle</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>points_inside <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop to generate points and check if they are inside the circle</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_points) {</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate random x and y coordinates using runif()</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if point is inside the circle (x^2 + y^2 &lt;= 1)</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span> <span class="sc">&lt;=</span> <span class="dv">1</span>) {</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    points_inside <span class="ot">&lt;-</span> points_inside <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Approximate pi</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>approximated_pi_loop_runif <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="sc">*</span> points_inside <span class="sc">/</span> n_points</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>approximated_pi_loop_runif</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.1416</code></pre>
</div>
</div>
<hr>
</section>
<section id="exercise" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="exercise"><span class="header-section-number">4.8</span> Exercise</h2>
<p>In many applications, particularly in simulations or Monte Carlo methods, the parameters of a distribution might not be constants but could be variables themselves. This can be particularly useful when modeling uncertainty in parameters.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Question statment</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Solutions</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><strong>Generating Random Variables with Variable Inputs in R</strong></p>
<p>Suppose we’re modeling the scores of students on a test, and we believe the scores are normally distributed around an average of 80. However, we think that the variability (standard deviation) of scores could itself be a random variable, perhaps based on different teaching methods or study materials used.</p>
<p>Let’s say the standard deviation follows a discrete distribution where:</p>
<ul>
<li>There’s a 50% chance that the standard deviation (reflecting the variability of scores) is 5, which corresponds to the standard teaching method.</li>
<li>There’s an equal 50% chance that the standard deviation is 10, representing the new experimental teaching method.</li>
</ul>
<p>Generate a sample of student scores using <code>rnorm()</code> with this variable input <code>teaching_methods</code></p>
<p>Hints and Steps:</p>
<ul>
<li>Sample the teaching method first:
<ul>
<li><code>sd</code> could either be 5 or 10. Then your code should have a vector of <code>c(5,10)</code></li>
<li>size of the sample: 1000</li>
<li>replacement? YES!</li>
<li>probability? (0.5,0.5)</li>
<li>save this sample into <code>teaching_methods</code></li>
</ul></li>
<li>Use <code>rnorms</code> to generate scores, and in your <code>rnorm()</code> arguments, try two things:
<ul>
<li>let <code>sd = teaching_methods</code></li>
<li>let <code>sd = mean(teaching_methods)</code></li>
</ul></li>
<li>What are the difference?</li>
</ul>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># For reproducibility</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample the teaching method</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>teaching_methods <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>), <span class="at">size =</span> <span class="dv">1000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate scores using the variable standard deviation</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">80</span>, <span class="at">sd =</span> teaching_methods)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few scores</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(scores)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  51.90   75.31   80.21   80.09   84.41  111.84 </code></pre>
</div>
</div>
<p>In this example, each student’s score is generated using a normal distribution with a mean of 80 but a variable standard deviation based on the teaching method. This introduces an additional layer of randomness and complexity, reflecting the real-world scenario where multiple factors can introduce variability.</p>
</div>
</div>
</div>
<hr>
</section>
<section id="expected-values-variance" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="expected-values-variance"><span class="header-section-number">4.9</span> Expected Values, Variance</h2>
<p>Just like the results from the Exercise above, once we have a random variable <span class="math inline">\(X\)</span>, we can always find the expected values of it <span class="math inline">\(E[X]\)</span> and the variance of it <span class="math inline">\(Var[X]\)</span>. How to take those values? For the random variable <code>teaching_methods</code>, we can use <code>mean()</code> and <code>var()</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(teaching_methods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.535</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(teaching_methods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.25503</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">sqrt</span>(<span class="fu">var</span>(teaching_methods)) <span class="sc">==</span> <span class="fu">sd</span>(teaching_methods)) {</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">sd</span>(teaching_methods))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.501006</code></pre>
</div>
</div>
</section>
<section id="plot-the-distribution-of-random-variable" class="level2" data-number="4.10">
<h2 data-number="4.10" class="anchored" data-anchor-id="plot-the-distribution-of-random-variable"><span class="header-section-number">4.10</span> Plot the distribution of random variable</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(teaching_methods, <span class="at">main=</span><span class="st">"Histogram of Teaching Methods"</span>, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">"Standard Deviation (Teaching Method)"</span>, <span class="at">ylab=</span><span class="st">"Frequency"</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span><span class="st">"lightblue"</span>, <span class="at">border=</span><span class="st">"black"</span>, <span class="at">breaks=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="lec4_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
</section>
<section id="regression-related-functions-in-r" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> <strong>Regression-Related Functions in R</strong></h1>
<p>Regression analysis is a powerful statistical method that allows us to examine the relationship between two or more variables of interest. In R, we often use the <code>lm()</code> function for linear regression. However, to dive deeper into the results, especially the coefficients and their standard errors, we need to be familiar with matrix operations and loops.</p>
<hr>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><strong>Econometrics Expression </strong>:</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">R code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p><strong>1. Linear Regression in R</strong></p>
<p>We’ll begin with a simple linear regression using R’s built-in dataset <code>mtcars</code>.</p>
<p>Consider a linear regression model of the <code>mpg</code> (miles per gallon) as a function of <code>wt</code> (weight) and <code>hp</code> (horsepower) using the <code>mtcars</code> dataset.</p>
<p>The mathematical equation representing this linear regression model is:</p>
<p><span class="math display">\[
\text{mpg} = \beta_0 + \beta_1 \times \text{wt} + \beta_2 \times \text{hp} + \epsilon
\]</span></p>
<p>Where: - <span class="math inline">\(\text{mpg}\)</span> is the dependent variable (miles per gallon). - <span class="math inline">\(\text{wt}\)</span> is the weight of the car. - <span class="math inline">\(\text{hp}\)</span> is the horsepower of the car. - <span class="math inline">\(\beta_0\)</span> is the intercept. - <span class="math inline">\(\beta_1\)</span> is the coefficient for weight (<code>wt</code>). - <span class="math inline">\(\beta_2\)</span> is the coefficient for horsepower (<code>hp</code>). - <span class="math inline">\(\epsilon\)</span> represents the error term, capturing the variability not explained by weight and horsepower.</p>
<p>Task:</p>
<ul>
<li>Use R code to run this linear regression model</li>
<li>save this model called <code>model</code></li>
</ul>
<p><strong>2. Extracting Coefficients and Standard Errors</strong></p>
<p>Once you have your regression model, you might want to extract the coefficients and standard errors for further analysis.</p>
<p>Task:</p>
<ul>
<li>Save the coefficients from the linear regression, called it <code>coefficients</code></li>
<li>From the coefficient’s matrix, get the standard error vector: <code>std_errors</code></li>
</ul>
<p><strong>3. Matrix Calculations using Loops</strong></p>
<p>Let’s assume you want to multiply each coefficient with its corresponding standard error.</p>
<p>Task:</p>
<ul>
<li><p>Use <code>numeric()</code> and <code>length()</code> functions to generate an empty vector called <code>result</code> that has the same length with <code>coefficients</code>.</p></li>
<li><p>Using a for loop to multiply each coefficient with its corresponding standard error and save the multiplied result in <code>result</code></p></li>
<li><p>(Optional) Create a function <code>coef_times_se</code> that takes a linear model as input and returns the coefficients multiplied by their standard errors.</p></li>
</ul>
<p><strong>4. Advanced Matrix Operations</strong></p>
<p>Compute the dot product of the coefficients and standard errors:</p>
<ul>
<li><p>Transpose your coefficients first!</p></li>
<li><p>(Optional) Create a function <code>coef_dot_se</code> that takes a linear model as input and returns the dot product of the coefficients and their standard errors.</p></li>
</ul>
<p><strong>5. Custom Functions with Loops for Regression Results</strong></p>
<p>Create a function <code>coef_se_square</code> that squares each coefficient and multiplies it by the square of its standard error.</p>
<ul>
<li>function input: <code>model</code> you saved</li>
</ul>
<p><strong>6. Basic Visualization</strong></p>
<ol type="1">
<li><strong>Scatter plot with regression line</strong>:
<ul>
<li>Produce a scatter plot with <code>wt</code> on the x-axis and <code>mpg</code> on the y-axis.</li>
<li>Color the points by <code>hp</code> (horsepower) to visualize its effect.</li>
<li>Add the regression line to this plot.</li>
</ul></li>
<li><strong>Descriptive statistics table</strong>:
<ul>
<li>Create a table that displays descriptive statistics (mean, median, standard deviation) for <code>mpg</code>, <code>wt</code>, and <code>hp</code>.</li>
</ul></li>
</ol>
<hr>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p><strong>1. Fit Linear Model</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data=</span>mtcars)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt + hp, data = mtcars)

Residuals:
   Min     1Q Median     3Q    Max 
-3.941 -1.600 -0.182  1.050  5.854 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 37.22727    1.59879  23.285  &lt; 2e-16 ***
wt          -3.87783    0.63273  -6.129 1.12e-06 ***
hp          -0.03177    0.00903  -3.519  0.00145 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.593 on 29 degrees of freedom
Multiple R-squared:  0.8268,    Adjusted R-squared:  0.8148 
F-statistic: 69.21 on 2 and 29 DF,  p-value: 9.109e-12</code></pre>
</div>
</div>
<p><strong>2. Extracting Coefficients and Standard Errors</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>coefficients <span class="ot">&lt;-</span> <span class="fu">coef</span>(model)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>std_errors <span class="ot">&lt;-</span> <span class="fu">summary</span>(model)<span class="sc">$</span>coefficients[, <span class="st">"Std. Error"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>3. Matrix Calculations using Loops</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="fu">length</span>(coefficients))</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(coefficients)) {</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  result[i] <span class="ot">&lt;-</span> coefficients[i] <span class="sc">*</span> std_errors[i]</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>4. Advanced Matrix Operations</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>dot_product <span class="ot">&lt;-</span> <span class="fu">t</span>(coefficients) <span class="sc">%*%</span> std_errors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>5. Custom Functions with Loops for Regression Results</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>coef_se_square <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  coefficients <span class="ot">&lt;-</span> <span class="fu">coef</span>(model)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  std_errors <span class="ot">&lt;-</span> <span class="fu">summary</span>(model)<span class="sc">$</span>coefficients[, <span class="st">"Std. Error"</span>]</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="fu">length</span>(coefficients))</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(coefficients)) {</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    result[i] <span class="ot">&lt;-</span> (coefficients[i]<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> (std_errors[i]<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><strong>6. Visualization</strong></p>
<p><strong>6.1. &amp; 6.2. Scatter plot with regression line:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>wt, <span class="at">y=</span>mpg, <span class="at">color=</span>hp)) <span class="sc">+</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>, <span class="at">se=</span><span class="cn">FALSE</span>, <span class="at">color=</span><span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Scatter plot of mpg vs wt colored by hp"</span>, </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">color=</span><span class="st">"Horsepower (hp)"</span>)</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lec4_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>6.3. Descriptive statistics table:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>desc_stats <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">c</span>(<span class="st">"mpg"</span>, <span class="st">"wt"</span>, <span class="st">"hp"</span>),</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mean =</span> <span class="fu">c</span>(<span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg), <span class="fu">mean</span>(mtcars<span class="sc">$</span>wt), <span class="fu">mean</span>(mtcars<span class="sc">$</span>hp)),</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Median =</span> <span class="fu">c</span>(<span class="fu">median</span>(mtcars<span class="sc">$</span>mpg), <span class="fu">median</span>(mtcars<span class="sc">$</span>wt), <span class="fu">median</span>(mtcars<span class="sc">$</span>hp)),</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Std.Dev =</span> <span class="fu">c</span>(<span class="fu">sd</span>(mtcars<span class="sc">$</span>mpg), <span class="fu">sd</span>(mtcars<span class="sc">$</span>wt), <span class="fu">sd</span>(mtcars<span class="sc">$</span>hp))</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(desc_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Variable      Mean  Median    Std.Dev
1      mpg  20.09062  19.200  6.0269481
2       wt   3.21725   3.325  0.9784574
3       hp 146.68750 123.000 68.5628685</code></pre>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="reference" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Reference</h1>
<ul>
<li><p><a href="https://cran.r-project.org/doc/manuals/R-intro.pdf">An Introduction to R</a></p></li>
<li><p><a href="https://bookdown.org/yih_huynh/Guide-to-R-Book/">R for Graduate Student</a></p></li>
<li><p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a></p></li>
<li><p><a href="https://www.econometrics-with-r.org/index.html">Introduction to Econometrics with R</a></p></li>
<li><p><a href="https://libguides.bates.edu/r/r-for-economics">R for Economics</a></p></li>
<li><p><a href="https://rkabacoff.github.io/datavis/datavis.pdf">Data Visualization with R</a></p></li>
<li><p>Dr.&nbsp;Qingxiao Li’s notes for R-Review 2020</p></li>
<li><p>Rodrigo Franco’s notes for R-Review 2021</p></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Lifeng Ren</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lfr00154/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>