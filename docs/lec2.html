<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lifeng Ren">
<meta name="dcterms.date" content="2023-09-07">

<title>Lifeng Ren - Lecture 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Lifeng Ren</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teaching">    
        <li class="dropdown-header">R-Review-2023</li>
        <li>
    <a class="dropdown-item" href="./lec0.html" rel="" target="">
 <span class="dropdown-text">Lecture 0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec1.html" rel="" target="">
 <span class="dropdown-text">Lecture 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec2.html" rel="" target="">
 <span class="dropdown-text">Lecture 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec3.html" rel="" target="">
 <span class="dropdown-text">Lecture 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec4.html" rel="" target="">
 <span class="dropdown-text">Lecture 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lec5.html" rel="" target="">
 <span class="dropdown-text">Lecture 5</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lec0.html">R-Review-2023</a></li><li class="breadcrumb-item"><a href="./lec2.html">Lecture 2</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R-Review-2023</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 0</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lec5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#course-updates" id="toc-course-updates" class="nav-link active" data-scroll-target="#course-updates"><span class="header-section-number">1</span> Course Updates</a></li>
  <li><a href="#recap-from-yesterday" id="toc-recap-from-yesterday" class="nav-link" data-scroll-target="#recap-from-yesterday"><span class="header-section-number">2</span> Recap from Yesterday</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">3</span> Introduction</a></li>
  <li><a href="#control-structures" id="toc-control-structures" class="nav-link" data-scroll-target="#control-structures"><span class="header-section-number">4</span> Control Structures</a>
  <ul class="collapse">
  <li><a href="#if-statement" id="toc-if-statement" class="nav-link" data-scroll-target="#if-statement"><span class="header-section-number">4.1</span> <code>if</code> Statement</a></li>
  <li><a href="#else-statement" id="toc-else-statement" class="nav-link" data-scroll-target="#else-statement"><span class="header-section-number">4.2</span> <code>else</code> Statement</a></li>
  <li><a href="#ifelse-function" id="toc-ifelse-function" class="nav-link" data-scroll-target="#ifelse-function"><span class="header-section-number">4.3</span> <code>ifelse</code> Function</a></li>
  <li><a href="#for-loop" id="toc-for-loop" class="nav-link" data-scroll-target="#for-loop"><span class="header-section-number">4.4</span> <code>for</code> Loop</a></li>
  <li><a href="#repeat-loop" id="toc-repeat-loop" class="nav-link" data-scroll-target="#repeat-loop"><span class="header-section-number">4.5</span> <code>repeat</code> Loop</a></li>
  <li><a href="#loop-control-with-break-and-next" id="toc-loop-control-with-break-and-next" class="nav-link" data-scroll-target="#loop-control-with-break-and-next"><span class="header-section-number">4.6</span> Loop Control with <code>break</code> and <code>next</code></a></li>
  <li><a href="#exercise-session-deep-dive-into-control-structures-in-r" id="toc-exercise-session-deep-dive-into-control-structures-in-r" class="nav-link" data-scroll-target="#exercise-session-deep-dive-into-control-structures-in-r"><span class="header-section-number">4.7</span> Exercise Session: Deep Dive into Control Structures in R</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">5</span> Functions</a>
  <ul class="collapse">
  <li><a href="#built-in-functions" id="toc-built-in-functions" class="nav-link" data-scroll-target="#built-in-functions"><span class="header-section-number">5.1</span> Built-in Functions</a></li>
  <li><a href="#writing-custom-functions" id="toc-writing-custom-functions" class="nav-link" data-scroll-target="#writing-custom-functions"><span class="header-section-number">5.2</span> Writing Custom Functions</a></li>
  <li><a href="#the-apply-family-of-functions" id="toc-the-apply-family-of-functions" class="nav-link" data-scroll-target="#the-apply-family-of-functions"><span class="header-section-number">5.3</span> The Apply Family of Functions</a></li>
  <li><a href="#exercise-session-deep-dive-into-functions-in-r" id="toc-exercise-session-deep-dive-into-functions-in-r" class="nav-link" data-scroll-target="#exercise-session-deep-dive-into-functions-in-r"><span class="header-section-number">5.4</span> Exercise Session: Deep Dive into Functions in R</a></li>
  </ul></li>
  <li><a href="#data-manipulation" id="toc-data-manipulation" class="nav-link" data-scroll-target="#data-manipulation"><span class="header-section-number">6</span> Data Manipulation</a>
  <ul class="collapse">
  <li><a href="#libraries-and-packages" id="toc-libraries-and-packages" class="nav-link" data-scroll-target="#libraries-and-packages"><span class="header-section-number">6.1</span> Libraries and Packages</a></li>
  <li><a href="#data-manipulation-in-base-r" id="toc-data-manipulation-in-base-r" class="nav-link" data-scroll-target="#data-manipulation-in-base-r"><span class="header-section-number">6.2</span> Data Manipulation in Base R</a></li>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link" data-scroll-target="#tidyverse"><span class="header-section-number">6.3</span> Tidyverse</a></li>
  <li><a href="#data.table" id="toc-data.table" class="nav-link" data-scroll-target="#data.table"><span class="header-section-number">6.4</span> data.table</a></li>
  <li><a href="#exercise-session-data-manipulation-in-r" id="toc-exercise-session-data-manipulation-in-r" class="nav-link" data-scroll-target="#exercise-session-data-manipulation-in-r"><span class="header-section-number">6.5</span> Exercise Session: Data Manipulation in R</a></li>
  </ul></li>
  <li><a href="#comprehensive-project-for-today" id="toc-comprehensive-project-for-today" class="nav-link" data-scroll-target="#comprehensive-project-for-today"><span class="header-section-number">7</span> Comprehensive Project for Today</a>
  <ul class="collapse">
  <li><a href="#project-overview" id="toc-project-overview" class="nav-link" data-scroll-target="#project-overview"><span class="header-section-number">7.1</span> <strong>Project Overview</strong></a></li>
  <li><a href="#dataset-mtcars" id="toc-dataset-mtcars" class="nav-link" data-scroll-target="#dataset-mtcars"><span class="header-section-number">7.2</span> <strong>Dataset</strong>: <code>mtcars</code></a></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks"><span class="header-section-number">7.3</span> <strong>Tasks</strong></a></li>
  <li><a href="#solutions-3" id="toc-solutions-3" class="nav-link" data-scroll-target="#solutions-3"><span class="header-section-number">7.4</span> Solutions</a></li>
  </ul></li>
  <li><a href="#for-tomorrow" id="toc-for-tomorrow" class="nav-link" data-scroll-target="#for-tomorrow"><span class="header-section-number">8</span> For Tomorrow</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">9</span> Appendix</a>
  <ul class="collapse">
  <li><a href="#apply-family-table-sytax-table" id="toc-apply-family-table-sytax-table" class="nav-link" data-scroll-target="#apply-family-table-sytax-table"><span class="header-section-number">9.1</span> Apply Family Table Sytax Table</a></li>
  </ul></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference"><span class="header-section-number">10</span> Reference</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lifeng Ren </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="course-updates" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Course Updates</h1>
<ul>
<li><p><code>useful_tools</code> folder is now available on GitHub</p></li>
<li><p>Solution for lecture 1’s project is available: <code>lec1_projsol.R</code></p></li>
<li><p>Any Questions? Comments? Suggestions?</p></li>
</ul>
</section>
<section id="recap-from-yesterday" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Recap from Yesterday</h1>
<ul>
<li><p>Basic data types in R</p></li>
<li><p>Matrix/Linear Algebra calculation in R</p></li>
<li><p>Basic data structures in R</p></li>
<li><p>Basic data access and results print</p></li>
</ul>
</section>
<section id="introduction" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Introduction</h1>
<p>In this lecture, we will delve into the following topics:</p>
<ul>
<li><p>Control structures</p>
<ul>
<li>Conditional statements (<code>if</code>, <code>else</code>, <code>ifelse</code>)</li>
<li>Loops (<code>for</code>, <code>while</code>, <code>repeat</code>, <code>break</code>, <code>next</code>)</li>
</ul></li>
<li><p>Functions:</p>
<ul>
<li>Introduction to built-in functions</li>
<li>Writing custom functions</li>
<li>The <code>apply</code> family of functions (<code>lapply</code>, <code>sapply</code>, <code>tapply</code>, etc.)</li>
</ul></li>
<li><p>Library and Packages</p></li>
<li><p>Data Manipulation</p>
<ul>
<li><code>base</code></li>
<li><code>tidyverse</code></li>
<li><code>data.table</code></li>
</ul></li>
</ul>
<p>Starting from this lecture, we will spend more time to practice and code than lecturing.</p>
<ul>
<li>You need generate the <code>R script</code> with your name from scratch for today.
<ul>
<li>Copy and paste the structure I showed you in <code>lec1_stu.R</code></li>
</ul></li>
</ul>
<p>Download <code>lec2.Rmd</code> and <code>Knit</code> it to <code>html</code></p>
</section>
<section id="control-structures" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Control Structures</h1>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 16%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Control Structure</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>if</code></td>
<td>Conditional Statement</td>
<td>Executes a block of code only if the specified condition is true.</td>
</tr>
<tr class="even">
<td><code>else</code></td>
<td>Conditional Statement</td>
<td>Executes a block of code if the preceding <code>if</code> condition is false.</td>
</tr>
<tr class="odd">
<td><code>ifelse</code></td>
<td>Conditional Statement</td>
<td>Vectorized alternative to <code>if</code> and <code>else</code> statements; useful for applying conditions on vectors.</td>
</tr>
<tr class="even">
<td><code>for</code></td>
<td>Loop</td>
<td>Iterates over a sequence or vector.</td>
</tr>
<tr class="odd">
<td><code>while</code></td>
<td>Loop</td>
<td>Continuously executes a block of code as long as the specified condition remains true.</td>
</tr>
<tr class="even">
<td><code>repeat</code></td>
<td>Loop</td>
<td>Executes a block of code indefinitely until a <code>break</code> statement is encountered.</td>
</tr>
<tr class="odd">
<td><code>break</code></td>
<td>Loop Control</td>
<td>Exits the loop completely.</td>
</tr>
<tr class="even">
<td><code>next</code></td>
<td>Loop Control</td>
<td>Skips the rest of the current iteration in a loop and moves to the next iteration.</td>
</tr>
</tbody>
</table>
<section id="if-statement" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="if-statement"><span class="header-section-number">4.1</span> <code>if</code> Statement</h2>
<ul>
<li>Used to execute a block of code only if a condition is true.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">3</span>) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"x is greater than 3"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x is greater than 3"</code></pre>
</div>
</div>
</section>
<section id="else-statement" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="else-statement"><span class="header-section-number">4.2</span> <code>else</code> Statement</h2>
<ul>
<li>Used to execute a block of code if the <code>if</code> condition is false.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">3</span>) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"x is greater than 3"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"x is not greater than 3"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x is not greater than 3"</code></pre>
</div>
</div>
</section>
<section id="ifelse-function" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="ifelse-function"><span class="header-section-number">4.3</span> <code>ifelse</code> Function</h2>
<ul>
<li>Vectorized alternative to the <code>if</code> and <code>else</code> statements. Useful when working with vectors.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">3</span>, <span class="st">"Greater"</span>, <span class="st">"Not Greater"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Not Greater" "Not Greater" "Not Greater" "Greater"     "Greater"    </code></pre>
</div>
</div>
</section>
<section id="for-loop" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="for-loop"><span class="header-section-number">4.4</span> <code>for</code> Loop</h2>
<ul>
<li>Iterates over a sequence or vector.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<ul>
<li>Advanced Nested <code>for</code> Loops: Matrix Iteration with Missing Values</li>
</ul>
<section id="example-populating-a-10x10-matrix-with-special-conditions" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="example-populating-a-10x10-matrix-with-special-conditions"><span class="header-section-number">4.4.1</span> Example: Populating a 10x10 Matrix with Special Conditions</h3>
<p>Let’s create a <span class="math inline">\(10 \times 10\)</span> matrix such that:</p>
<ol type="1">
<li>Each entry <span class="math inline">\(M_{ij}\)</span> is initially given by <span class="math inline">\(M_{ij} = i \times j\)</span>.</li>
<li>If <span class="math inline">\(i = j\)</span> (i.e., on the diagonal), the entry is set to <code>NA</code> (missing value).</li>
<li>If <span class="math inline">\(i + j\)</span> is even and <span class="math inline">\(i \neq j\)</span>, halve the value of <span class="math inline">\(M_{ij}\)</span>.</li>
<li>If <span class="math inline">\(i + j\)</span> is odd and <span class="math inline">\(i \neq j\)</span>, square the value of <span class="math inline">\(M_{ij}\)</span>.</li>
</ol>
<p><strong>R Code:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initializing a 10x10 matrix with zeros</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="dv">10</span>, <span class="at">ncol=</span><span class="dv">10</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using nested for loops to populate the matrix with our conditions</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute the basic product</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    M[i, j] <span class="ot">&lt;-</span> i <span class="sc">*</span> j</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If we're on the diagonal, set the value to NA</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">==</span> j) {</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      M[i, j] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If the sum of the row and column index is even (and we're off the diagonal)</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> ((i <span class="sc">+</span> j) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>      M[i, j] <span class="ot">&lt;-</span> M[i, j] <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If the sum of the row and column index is odd (and we're off the diagonal)</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> ((i <span class="sc">+</span> j) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>      M[i, j] <span class="ot">&lt;-</span> M[i, j]<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing the matrix</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(M)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       [,1] [,2]  [,3] [,4]   [,5] [,6]   [,7] [,8]   [,9] [,10]
 [1,]    NA    4   1.5   16    2.5   36    3.5   64    4.5   100
 [2,]   4.0   NA  36.0    4  100.0    6  196.0    8  324.0    10
 [3,]   1.5   36    NA  144    7.5  324   10.5  576   13.5   900
 [4,]  16.0    4 144.0   NA  400.0   12  784.0   16 1296.0    20
 [5,]   2.5  100   7.5  400     NA  900   17.5 1600   22.5  2500
 [6,]  36.0    6 324.0   12  900.0   NA 1764.0   24 2916.0    30
 [7,]   3.5  196  10.5  784   17.5 1764     NA 3136   31.5  4900
 [8,]  64.0    8 576.0   16 1600.0   24 3136.0   NA 5184.0    40
 [9,]   4.5  324  13.5 1296   22.5 2916   31.5 5184     NA  8100
[10,] 100.0   10 900.0   20 2500.0   30 4900.0   40 8100.0    NA</code></pre>
</div>
</div>
<hr>
<p>This example introduces:</p>
<ul>
<li><p><strong>Matrix Diagonal Manipulation</strong>: By setting diagonal elements to <code>NA</code>, we simulate scenarios like missing data in real-world datasets.</p></li>
<li><p><strong>Conditional Operations</strong>: By halving or squaring based on the sum of indices, we introduce condition-based operations, which are typical in data manipulations.</p></li>
</ul>
</section>
<section id="while-loop" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="while-loop"><span class="header-section-number">4.4.2</span> <code>while</code> Loop</h3>
<ul>
<li>Executes as long as a condition remains true.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (count <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(count)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
</section>
</section>
<section id="repeat-loop" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="repeat-loop"><span class="header-section-number">4.5</span> <code>repeat</code> Loop</h2>
<ul>
<li>Executes indefinitely until a <code>break</code> statement is encountered.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span> {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(count)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (count <span class="sc">&gt;=</span> <span class="dv">5</span>) {</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
</section>
<section id="loop-control-with-break-and-next" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="loop-control-with-break-and-next"><span class="header-section-number">4.6</span> Loop Control with <code>break</code> and <code>next</code></h2>
<ul>
<li><code>break</code>: Exits the loop completely.</li>
<li><code>next</code>: Skips the rest of the current iteration and moves to the next one.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">9</span>) {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 3
[1] 5
[1] 7</code></pre>
</div>
</div>
<hr>
</section>
<section id="exercise-session-deep-dive-into-control-structures-in-r" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="exercise-session-deep-dive-into-control-structures-in-r"><span class="header-section-number">4.7</span> Exercise Session: Deep Dive into Control Structures in R</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Solutions</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><strong>Question 1: Basic <code>if</code> Condition</strong></p>
<p><strong>Part (a) - In Class:</strong><br>
Given a number <span class="math inline">\(x\)</span>, write an R script to check if <span class="math inline">\(x\)</span> is positive. If it is positive, print “Positive”.</p>
<p><strong>Part (b) - Take Home:</strong><br>
Extend the script from part (a) to also check for negative numbers and zeros. If <span class="math inline">\(x\)</span> is negative, print “Negative”, and if <span class="math inline">\(x\)</span> is zero, print “Zero”.</p>
<hr>
<p><strong>Question 2: Using <code>ifelse</code> with Vectors</strong></p>
<p><strong>Part (a) - In Class:</strong><br>
Given a vector <span class="math inline">\(v = \text{c}(2, 4, 6, 8, 10)\)</span>, use <code>ifelse</code> to classify each number as “Multiple of 3” or “Not a multiple of 3”.</p>
<p><strong>Part (b) - Take Home:</strong><br>
Given a vector <span class="math inline">\(v\)</span> containing numbers from 1 to 10, use <code>ifelse</code> to label each number as “Prime” or “Not Prime”.</p>
<hr>
<p><strong>Question 3: Basic Loop Operations</strong></p>
<p><strong>Part (a) - In Class:</strong><br>
Write a <code>for</code> loop to print the first five even numbers.</p>
<p><strong>Part (b) - Take Home:</strong><br>
Use a <code>while</code> loop to do the same thing, but this time, print the first five odd numbers.</p>
<hr>
<p><strong>Challenging Exercise: Understanding and Manipulating the Variance-Covariance Matrix</strong></p>
<p><strong>Background:</strong></p>
<p>A variance-covariance matrix provides valuable insights into the relationships between multiple variables in a dataset. By understanding its structure and properties, you can derive important conclusions about the data’s underlying patterns.</p>
<p><strong>Notations:</strong></p>
<ul>
<li>Let <span class="math inline">\(X\)</span> be a matrix of data where each column represents a variable, and each row represents an observation.</li>
<li><span class="math inline">\(n\)</span> is the number of observations.</li>
<li><span class="math inline">\(p\)</span> is the number of variables.</li>
<li><span class="math inline">\(X_{ij}\)</span> represents the value of the <span class="math inline">\(j^{th}\)</span> variable in the <span class="math inline">\(i^{th}\)</span> observation.</li>
<li><span class="math inline">\(\bar{X}_j\)</span> represents the mean of the <span class="math inline">\(j^{th}\)</span> variable.</li>
</ul>
<p><strong>Variance:</strong></p>
<p>The variance of the <span class="math inline">\(j^{th}\)</span> variable is:</p>
<p><span class="math display">\[
\text{Var}(X_j) = \frac{1}{n-1} \sum_{i=1}^{n} (X_{ij} - \bar{X}_j)^2
\]</span></p>
<p><strong>Covariance:</strong></p>
<p>The covariance between the $ j^{th} $ variable and the $ k^{th} $ variable is:</p>
<p><span class="math display">\[
\text{Cov}(X_j, X_k) = \frac{1}{n-1} \sum_{i=1}^{n} (X_{ij} - \bar{X}_j)(X_{ik} - \bar{X}_k)
\]</span></p>
<p><strong>Variance-Covariance Matrix:</strong></p>
<p>The variance-covariance matrix <span class="math inline">\(\Sigma\)</span> for a dataset with <span class="math inline">\(p\)</span> variables is a <span class="math inline">\(p \times p\)</span> matrix where each element <span class="math inline">\(\Sigma_{jk}\)</span> is:</p>
<ul>
<li>The variance of the <span class="math inline">\(j^{th}\)</span> variable if <span class="math inline">\(j = k\)</span></li>
<li>The covariance between the <span class="math inline">\(j^{th}\)</span> and <span class="math inline">\(k^{th}\)</span> variables if <span class="math inline">\(j \neq k\)</span></li>
</ul>
<p>Mathematically, the matrix is represented as:</p>
<p><span class="math display">\[
\Sigma =
\begin{bmatrix}
\text{Var}(X_1) &amp; \text{Cov}(X_1, X_2) &amp; \dots &amp; \text{Cov}(X_1, X_p) \\
\text{Cov}(X_2, X_1) &amp; \text{Var}(X_2) &amp; \dots &amp; \text{Cov}(X_2, X_p) \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
\text{Cov}(X_p, X_1) &amp; \text{Cov}(X_p, X_2) &amp; \dots &amp; \text{Var}(X_p) \\
\end{bmatrix}
\]</span></p>
<p>Where the diagonal elements represent variances of each variable, and off-diagonal elements represent the covariances between different pairs of variables.</p>
<p><strong>Task:</strong></p>
<p>Given the dataframe:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>), </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>), </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">C =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Perform the following tasks:</p>
<ol type="1">
<li>Manually compute the variance-covariance matrix for this dataframe, without using <code>cov()</code> function. And then compare your results with the matrix using <code>cov</code> function.</li>
</ol>
<hr>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><strong>Solution for Question 1: Basic <code>if</code> Condition</strong></p>
<p><strong>Part (a) - In Class:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span>  <span class="co"># or any other number</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Positive"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Part (b) - Take Home:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Positive"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Negative"</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Zero"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><strong>Solution for Question 2: Using <code>ifelse</code> with Vectors</strong></p>
<p><strong>Part (a) - In Class:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(v <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Multiple of 3"</span>, <span class="st">"Not a multiple of 3"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Part (b) - Take Home:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>is_prime <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;=</span> <span class="dv">1</span>) <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">sqrt</span>(n)) {</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (n <span class="sc">%%</span> i <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">sapply</span>(v, is_prime), <span class="st">"Prime"</span>, <span class="st">"Not Prime"</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p><strong>Solution for Question 3: Basic Loop Operations</strong></p>
<p><strong>Part (a) - In Class:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Part (b) - Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>number <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (count <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(number)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  number <span class="ot">&lt;-</span> number <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 3
[1] 5
[1] 7
[1] 9</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Challanging Question</strong></p>
<p>Given the dataframe:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>), </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>), </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">C =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Perform the following tasks:</p>
<p><strong>Manually compute the variance-covariance matrix</strong>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the mean of each variable</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>mean_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">mean</span>(df<span class="sc">$</span>A, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="fu">mean</span>(df<span class="sc">$</span>B, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="fu">mean</span>(df<span class="sc">$</span>C, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix to store the variance-covariance matrix</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>myvcov_df <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over each variable</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the mean of the current variable</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  mean_i <span class="ot">&lt;-</span> mean_values[i]</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Iterate over each other variable</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the mean of the other variable</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    mean_j <span class="ot">&lt;-</span> mean_values[j]</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the covariance between the current variable and the other variable</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    cov_ij <span class="ot">&lt;-</span> <span class="fu">sum</span>((df[[i]] <span class="sc">-</span> mean_i) <span class="sc">*</span> (df[[j]] <span class="sc">-</span> mean_j)) <span class="sc">/</span> (<span class="fu">length</span>(df[[i]]) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store the covariance in the variance-covariance matrix</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    myvcov_df[i, j] <span class="ot">&lt;-</span> cov_ij</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the variance-covariance matrix</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(myvcov_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    9    9    9
[2,]    9    9    9
[3,]    9    9    9</code></pre>
</div>
</div>
<p>Then, we use with R’s built-in function: <code>cov</code>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the variance of each variable</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>var_a <span class="ot">&lt;-</span> <span class="fu">var</span>(df<span class="sc">$</span>A)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>var_b <span class="ot">&lt;-</span> <span class="fu">var</span>(df<span class="sc">$</span>B)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>var_c <span class="ot">&lt;-</span> <span class="fu">var</span>(df<span class="sc">$</span>C)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the covariance between each pair of variables</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>cov_ab <span class="ot">&lt;-</span> <span class="fu">cov</span>(df<span class="sc">$</span>A, df<span class="sc">$</span>B)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>cov_ac <span class="ot">&lt;-</span> <span class="fu">cov</span>(df<span class="sc">$</span>A, df<span class="sc">$</span>C)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>cov_bc <span class="ot">&lt;-</span> <span class="fu">cov</span>(df<span class="sc">$</span>B, df<span class="sc">$</span>C)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the variance-covariance matrix</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>vcov_df <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(var_a, cov_ab, cov_ac,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>                     cov_ab, var_b, cov_bc,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>                     cov_ac, cov_bc, var_c), <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the variance-covariance matrix</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(vcov_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    9    9    9
[2,]    9    9    9
[3,]    9    9    9</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or even simpler with one-line code</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cov</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  A B C
A 9 9 9
B 9 9 9
C 9 9 9</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
</section>
</section>
<section id="functions" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Functions</h1>
<hr>
<section id="built-in-functions" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="built-in-functions"><span class="header-section-number">5.1</span> Built-in Functions</h2>
<p>We’ve been using a lot of built-in functions already. For example: <code>mean()</code>, <code>sum()</code>, <code>print()</code>…</p>
<section id="simple-example" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="simple-example"><span class="header-section-number">5.1.1</span> Simple Example:</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))) <span class="co">#functions inside of functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="complex-example-with-visulization" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="complex-example-with-visulization"><span class="header-section-number">5.1.2</span> Complex Example with visulization:</h3>
<ul>
<li>Create a sample data frame containing data on students’ names, ages, and scores.</li>
<li>Visualize the data:
<ul>
<li>Plot ages (x-axis) against scores (y-axis).</li>
<li>Label each point with the student’s name.</li>
</ul></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a sample data frame</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"David"</span>, <span class="st">"Eve"</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">19</span>, <span class="dv">22</span>, <span class="dv">21</span>),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">78</span>, <span class="dv">92</span>, <span class="dv">88</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot ages against scores</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(students<span class="sc">$</span>Age, students<span class="sc">$</span>Score, </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">main=</span><span class="st">"Students' Scores vs. Age"</span>, </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">"Age"</span>, </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">"Score"</span>, </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch=</span><span class="dv">19</span>, </span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span><span class="st">"blue"</span>,</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">18</span>,<span class="dv">23</span>), </span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">100</span>))</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Label each point with the student's name</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(students<span class="sc">$</span>Age, students<span class="sc">$</span>Score, <span class="at">labels=</span>students<span class="sc">$</span>Name, <span class="at">pos=</span><span class="dv">3</span>, <span class="at">cex=</span><span class="fl">0.8</span>, <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="lec2_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
</section>
<section id="writing-custom-functions" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="writing-custom-functions"><span class="header-section-number">5.2</span> Writing Custom Functions</h2>
<p>Custom functions allow users to encapsulate a series of commands into a single command, making code more modular and easier to read.</p>
<section id="how-to-define-a-custom-function" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="how-to-define-a-custom-function"><span class="header-section-number">5.2.1</span> How to define a custom function?</h3>
<p>The general format for creating a custom function in R is:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(arguments) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># body of the function</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(value)  <span class="co"># Optional</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="simple-example-1" class="level4">
<h4 class="anchored" data-anchor-id="simple-example-1">Simple Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to calculate the square of a number</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the function</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">square</span>(<span class="dv">5</span>)  <span class="co"># Expected output: 25</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</section>
<section id="complex-example" class="level4">
<h4 class="anchored" data-anchor-id="complex-example">Complex Example</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom function to process and return results in a data frame</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>process_scores <span class="ot">&lt;-</span> <span class="cf">function</span>(ages, names, scores) {</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(ages) <span class="sc">!=</span> <span class="fu">length</span>(names) <span class="sc">||</span> <span class="fu">length</span>(names) <span class="sc">!=</span> <span class="fu">length</span>(scores)) {</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"All input vectors must have the same length!"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a data frame from the input vectors</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> names, <span class="at">Age =</span> ages, <span class="at">Score =</span> scores)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the average score</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    average_score <span class="ot">&lt;-</span> <span class="fu">mean</span>(scores)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter data for people with scores above the average</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    above_average <span class="ot">&lt;-</span> data[data<span class="sc">$</span>Score <span class="sc">&gt;</span> average_score, ]</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(above_average)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"David"</span>)</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">30</span>, <span class="dv">27</span>, <span class="dv">22</span>)</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">88</span>, <span class="dv">86</span>)</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">process_scores</span>(ages, names, scores)</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Name Age Score
2     Bob  30    90
3 Charlie  27    88</code></pre>
</div>
</div>
</section>
<section id="recursive-functions-tribonacci-sequence" class="level4">
<h4 class="anchored" data-anchor-id="recursive-functions-tribonacci-sequence">Recursive Functions: Tribonacci Sequence</h4>
<p>One classic example that’s a step up from the Fibonacci sequence is the calculation of the factorial of a number using recursion. However, to make it a tad more challenging while still being understandable, let’s create a recursive function to compute the “Tribonacci” sequence.</p>
<p>The Tribonacci sequence is similar to Fibonacci, but instead of the sum of the last two numbers to get the next number, it takes the sum of the last three.</p>
<p>Here’s the sequence for reference: <span class="math display">\[
T_0 = 0, T_1 = 0, T_2 = 1, T_3 = 1, T_4 = 2, T_5 = 4, T_6 = 7, \dots
\]</span></p>
<p>The function to calculate the <span class="math inline">\(n\)</span>th number in the Tribonacci sequence is:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tribonacci <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">tribonacci</span>(n<span class="dv">-1</span>) <span class="sc">+</span> <span class="fu">tribonacci</span>(n<span class="dv">-2</span>) <span class="sc">+</span> <span class="fu">tribonacci</span>(n<span class="dv">-3</span>))</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"The"</span>, n, <span class="st">"th number in the Tribonacci sequence is:"</span>, <span class="fu">tribonacci</span>(n)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The 5 th number in the Tribonacci sequence is: 4</code></pre>
</div>
</div>
<p>The <code>tribonacci</code> function works by recursively calling itself to calculate the <span class="math inline">\(n-1\)</span>, <span class="math inline">\(n-2\)</span>, and <span class="math inline">\(n-3\)</span> values in the sequence until it reaches the base cases where <span class="math inline">\(n\)</span> is 0, 1, or 2.</p>
<hr>
</section>
</section>
</section>
<section id="the-apply-family-of-functions" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="the-apply-family-of-functions"><span class="header-section-number">5.3</span> The Apply Family of Functions</h2>
<p>The apply family of functions in R provides a way to avoid explicit loops in code, making operations faster and code more concise.</p>
<p>See a complete syntax table in Appendix.</p>
<section id="lapply" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="lapply"><span class="header-section-number">5.3.1</span> <code>lapply()</code></h3>
<section id="simple-example-2" class="level4">
<h4 class="anchored" data-anchor-id="simple-example-2">Simple Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">9</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(numbers, mean)  <span class="co"># Calculate mean for each list element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 2.5

[[2]]
[1] 6.5

[[3]]
[1] 10.5</code></pre>
</div>
</div>
</section>
<section id="complex-example-1" class="level4">
<h4 class="anchored" data-anchor-id="complex-example-1">Complex Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to calculate mean and standard deviation</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>stats <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x), <span class="at">sd =</span> <span class="fu">sd</span>(x)))</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(numbers, stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[[1]]$mean
[1] 2.5

[[1]]$sd
[1] 1.290994


[[2]]
[[2]]$mean
[1] 6.5

[[2]]$sd
[1] 1.290994


[[3]]
[[3]]$mean
[1] 10.5

[[3]]$sd
[1] 1.290994</code></pre>
</div>
</div>
</section>
</section>
<section id="sapply" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="sapply"><span class="header-section-number">5.3.2</span> <code>sapply()</code></h3>
<section id="simple-example-3" class="level4">
<h4 class="anchored" data-anchor-id="simple-example-3">Simple Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(numbers, <span class="cf">function</span>(x) x<span class="sc">^</span><span class="dv">2</span>)  <span class="co"># Square each element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  4  9 16 25</code></pre>
</div>
</div>
</section>
<section id="complex-example-2" class="level4">
<h4 class="anchored" data-anchor-id="complex-example-2">Complex Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return a matrix with numbers and their squares</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(numbers, <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="at">original =</span> x, <span class="at">squared =</span> x<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1] [,2] [,3] [,4] [,5]
original    1    2    3    4    5
squared     1    4    9   16   25</code></pre>
</div>
</div>
</section>
</section>
<section id="tapply" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="tapply"><span class="header-section-number">5.3.3</span> <code>tapply()</code></h3>
<section id="simple-example-4" class="level4">
<h4 class="anchored" data-anchor-id="simple-example-4">Simple Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>, <span class="dv">78</span>, <span class="dv">92</span>, <span class="dv">88</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>groups <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(scores, groups, mean)  <span class="co"># Calculate mean score for each group</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       A        B 
83.66667 91.00000 </code></pre>
</div>
</div>
</section>
<section id="complex-example-3" class="level4">
<h4 class="anchored" data-anchor-id="complex-example-3">Complex Example:</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate both mean and standard deviation for each group</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(scores, groups, <span class="cf">function</span>(x) <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x), <span class="at">sd =</span> <span class="fu">sd</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$A
$A$mean
[1] 83.66667

$A$sd
[1] 5.131601


$B
$B$mean
[1] 91

$B$sd
[1] 1.414214</code></pre>
</div>
</div>
<hr>
<p><strong>Note</strong>: There are other functions in the <code>apply</code> family such as <code>mapply()</code>, <code>vapply()</code>, etc. However, the above are some of the most commonly used ones.</p>
</section>
</section>
</section>
<section id="exercise-session-deep-dive-into-functions-in-r" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="exercise-session-deep-dive-into-functions-in-r"><span class="header-section-number">5.4</span> Exercise Session: Deep Dive into Functions in R</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Solutions</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<hr>
<p><strong>Question 1: Built-in Functions</strong></p>
<p><strong>a) In-Class:</strong><br>
Given a vector <code>x = c(5, 12, 13, 7, 2, 8)</code>, use a built-in function to find the mean of the vector. What is the mean value?</p>
<p><strong>b) Take Home:</strong><br>
For the same vector <code>x</code>, find the median, the minimum value, and the maximum value. Can you also determine the index positions of the minimum and maximum values?</p>
<hr>
<p><strong>Question 2: Customized Functions</strong></p>
<p><strong>a) In-Class:</strong><br>
Write a function named <code>area_of_rectangle</code> that takes in the length and breadth of a rectangle as arguments and returns its area. What is the area of a rectangle with length = 5 units and breadth = 3 units?</p>
<p><strong>b) Take Home:</strong><br>
Modify the above function to also compute the perimeter of the rectangle. The function should now return both the area and perimeter. Use your modified function to find the area and perimeter of a rectangle with length = 6 units and breadth = 4 units.</p>
<hr>
<p><strong>Question 3: Apply Family</strong></p>
<p><strong>a) In-Class:</strong><br>
Given a list <code>my_list = list(a = 1:5, b = 6:10, c = 11:15)</code>, use an appropriate function from the apply family to find the sum of each vector within the list.</p>
<p><strong>b) Take Home:</strong><br>
For the same list <code>my_list</code>, use a function from the apply family to find the mean of each vector within the list. Then, create a named vector where names are the list element names (<code>a</code>, <code>b</code>, <code>c</code>) and the values are the means you just computed.</p>
<hr>
<p><strong>Question 4: Advanced Custom Function with Recursion (Challenging)</strong></p>
<p>Create a custom function named <code>recursive_sum</code> that takes in a numeric vector. The function should:</p>
<ol type="1">
<li>If the vector has only one element, return the element.</li>
<li>If the vector has more than one element, split the vector into two halves and recursively call <code>recursive_sum</code> on each half. Return the sum of the results of the two halves.</li>
</ol>
<p>Now, within the <code>analyze_data</code> function:</p>
<ol type="1">
<li>Compute basic statistics: mean, median, standard deviation, and variance.</li>
<li>Identify outliers: values that are more than 1.5 * Interquartile Range (IQR) above the third quartile or below the first quartile.</li>
<li>Use the <code>recursive_sum</code> function to compute the sum of the numeric vector.</li>
<li>Return a list containing the basic statistics, outliers, and the sum computed using recursion.</li>
</ol>
<p>Test both functions with a vector of your choice.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">8</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>mean_value <span class="ot">=</span> <span class="fu">mean</span>(x)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mean_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.833333</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>median_value <span class="ot">=</span> <span class="fu">median</span>(x)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>min_value <span class="ot">=</span> <span class="fu">min</span>(x)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>max_value <span class="ot">=</span> <span class="fu">max</span>(x)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>min_index <span class="ot">=</span> <span class="fu">which.min</span>(x)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>max_index <span class="ot">=</span> <span class="fu">which.max</span>(x)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Median:"</span>, median_value))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Median: 7.5"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Minimum Value:"</span>, min_value, <span class="st">"at index"</span>, min_index))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Minimum Value: 2 at index 5"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Maximum Value:"</span>, max_value, <span class="st">"at index"</span>, max_index))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Maximum Value: 13 at index 3"</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 2: Customized Functions</strong></p>
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>area_of_rectangle <span class="ot">&lt;-</span> <span class="cf">function</span>(length, breadth) {</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(length <span class="sc">*</span> breadth)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>area <span class="ot">=</span> <span class="fu">area_of_rectangle</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>area_and_perimeter <span class="ot">&lt;-</span> <span class="cf">function</span>(length, breadth) {</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">=</span> length <span class="sc">*</span> breadth</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  perimeter <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> (length <span class="sc">+</span> breadth)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">Area =</span> area, <span class="at">Perimeter =</span> perimeter))</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> <span class="fu">area_and_perimeter</span>(<span class="dv">6</span>, <span class="dv">4</span>)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Area
[1] 24

$Perimeter
[1] 20</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 3: Apply Family</strong></p>
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">=</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">b =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">c =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>sums <span class="ot">=</span> <span class="fu">lapply</span>(my_list, sum)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(sums)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 15

$b
[1] 40

$c
[1] 65</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>means <span class="ot">=</span> <span class="fu">sapply</span>(my_list, mean)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>named_vector <span class="ot">=</span> <span class="fu">setNames</span>(means, <span class="fu">names</span>(my_list))</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(named_vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> a  b  c 
 3  8 13 </code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 4: Advanced Custom Function with Recursion</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>recursive_sum <span class="ot">&lt;-</span> <span class="cf">function</span>(vec) {</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(vec) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(vec)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    mid <span class="ot">=</span> <span class="fu">length</span>(vec) <span class="sc">%/%</span> <span class="dv">2</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    left_half <span class="ot">=</span> vec[<span class="dv">1</span><span class="sc">:</span>mid]</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    right_half <span class="ot">=</span> vec[(mid<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span><span class="fu">length</span>(vec)]</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">recursive_sum</span>(left_half) <span class="sc">+</span> <span class="fu">recursive_sum</span>(right_half))</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>analyze_data <span class="ot">&lt;-</span> <span class="cf">function</span>(vec) {</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  basic_stats <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(vec),</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Median =</span> <span class="fu">median</span>(vec),</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">StdDev =</span> <span class="fu">sd</span>(vec),</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variance =</span> <span class="fu">var</span>(vec)</span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>  Q1 <span class="ot">=</span> <span class="fu">quantile</span>(vec, <span class="fl">0.25</span>)</span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>  Q3 <span class="ot">=</span> <span class="fu">quantile</span>(vec, <span class="fl">0.75</span>)</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>  IQR <span class="ot">=</span> Q3 <span class="sc">-</span> Q1</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>  lower_bound <span class="ot">=</span> Q1 <span class="sc">-</span> <span class="fl">1.5</span> <span class="sc">*</span> IQR</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>  upper_bound <span class="ot">=</span> Q3 <span class="sc">+</span> <span class="fl">1.5</span> <span class="sc">*</span> IQR</span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>  outliers <span class="ot">=</span> vec[vec <span class="sc">&lt;</span> lower_bound <span class="sc">|</span> vec <span class="sc">&gt;</span> upper_bound]</span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>  sum_recursive <span class="ot">=</span> <span class="fu">recursive_sum</span>(vec)</span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">Stats =</span> basic_stats, <span class="at">Outliers =</span> outliers, <span class="at">Sum =</span> sum_recursive))</span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Test</span></span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a>test_vec <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">50</span>)</span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>result <span class="ot">=</span> <span class="fu">analyze_data</span>(test_vec)</span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Stats
$Stats$Mean
[1] 9.545455

$Stats$Median
[1] 6

$Stats$StdDev
[1] 13.72125

$Stats$Variance
[1] 188.2727


$Outliers
[1] 50

$Sum
[1] 105</code></pre>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="data-manipulation" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Data Manipulation</h1>
<p>In this section, we are going to learn the data manipulation from libarary <code>base</code>, <code>tidyverse</code>, and <code>data.table</code>.</p>
<p>This is why people like me using R other than STATA to do the first-round of data cleaning and data preparation. You will spend a lot of time on this. So, today is just a start on this.</p>
<section id="libraries-and-packages" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="libraries-and-packages"><span class="header-section-number">6.1</span> Libraries and Packages</h2>
<p>In R, the fundamental units of shareable code are called <strong>packages</strong>. A package bundles together code, data, documentation, and tests, and they can be shared with others as a single unit. When a package is used in an R script, it provides new functions, data, and documentation.</p>
<p>What is a Package?</p>
<ul>
<li>A collection of R functions, data, and compiled code in a well-defined format.</li>
<li>Contains a description of what the package does and R to install and load it.</li>
<li>Can be stored in a public repository like CRAN or in a private repository.</li>
</ul>
<hr>
<section id="installing-packages" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="installing-packages"><span class="header-section-number">6.1.1</span> Installing Packages</h3>
<section id="from-cran" class="level4">
<h4 class="anchored" data-anchor-id="from-cran">From CRAN</h4>
<ul>
<li>Most common method.</li>
<li>CRAN provides a repository of thousands of R packages.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"name_of_package"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="from-github" class="level4">
<h4 class="anchored" data-anchor-id="from-github">From GitHub</h4>
<ul>
<li>For packages not yet on CRAN.</li>
<li>Requires the <code>devtools</code> package.</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If not already installed</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"username/name_of_package"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
</section>
<section id="loading-packages" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="loading-packages"><span class="header-section-number">6.1.2</span> Loading Packages</h3>
<p>Once a package is installed, it must be loaded into the session to be used.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(name_of_package)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Note</strong>: <code>library()</code> and <code>require()</code> are two functions to load packages. <code>library()</code> stops if the package is not found, while <code>require()</code> gives a warning and returns FALSE.</p>
<hr>
</section>
<section id="updating-packages" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="updating-packages"><span class="header-section-number">6.1.3</span> Updating Packages</h3>
<p>Packages are updated frequently. To get the latest version:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
<section id="dependencies" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="dependencies"><span class="header-section-number">6.1.4</span> Dependencies</h3>
<ul>
<li>Some packages depend on other packages to work.</li>
<li>These are automatically installed when you install the main package.</li>
</ul>
<hr>
</section>
<section id="detaching-packages" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="detaching-packages"><span class="header-section-number">6.1.5</span> Detaching Packages</h3>
<p>If you load several packages, they can mask each other’s functions. To prevent this, you can detach packages.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">"package:name_of_package"</span>, <span class="at">unload=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
<section id="checking-installed-packages" class="level3" data-number="6.1.6">
<h3 data-number="6.1.6" class="anchored" data-anchor-id="checking-installed-packages"><span class="header-section-number">6.1.6</span> Checking Installed Packages</h3>
<p>To see a list of all your installed packages:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()[,<span class="st">"Package"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
<section id="useful-tips" class="level3" data-number="6.1.7">
<h3 data-number="6.1.7" class="anchored" data-anchor-id="useful-tips"><span class="header-section-number">6.1.7</span> 9. Useful Tips</h3>
<ul>
<li>Always look at the package’s documentation.</li>
<li>Regularly update your packages.</li>
<li>Be aware of potential conflicts between packages.</li>
<li>Use <code>sessionInfo()</code> to get information about the current R session, including loaded packages.</li>
</ul>
<hr>
<p><strong>Note</strong>: Using packages in R is essential for effective data analysis. They provide tools and methods that simplify complex tasks and improve the capability of R. Always remember to check the package documentation and keep them updated.</p>
</section>
</section>
<section id="data-manipulation-in-base-r" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="data-manipulation-in-base-r"><span class="header-section-number">6.2</span> Data Manipulation in Base R</h2>
<p>The base R system provides a range of functions for manipulating data. While they may not be as intuitive or concise as some of the other packages, understanding base R data manipulation is foundational.</p>
<section id="subsetting" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="subsetting"><span class="header-section-number">6.2.1</span> Subsetting</h3>
<ul>
<li>Using <code>[</code>, <code>[[</code>, and <code>$</code> to extract subsets of data.</li>
<li>Logical indexing for filtering rows or columns.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>), <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">29</span>))</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>subset_data <span class="ot">&lt;-</span> data[data<span class="sc">$</span>Age <span class="sc">&gt;</span> <span class="dv">28</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sorting" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="sorting"><span class="header-section-number">6.2.2</span> Sorting</h3>
<ul>
<li><code>order()</code>: Returns a permutation which rearranges its first argument into ascending or descending order.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data[<span class="fu">order</span>(data<span class="sc">$</span>Age), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="merging-and-joining" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="merging-and-joining"><span class="header-section-number">6.2.3</span> Merging and Joining</h3>
<ul>
<li><code>merge()</code>: Merges two data frames by common columns or row names.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Alice"</span>, <span class="st">"Bob"</span>), <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">90</span>))</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(data, data2, <span class="at">by=</span><span class="st">"Name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
</section>
<section id="tidyverse" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="tidyverse"><span class="header-section-number">6.3</span> Tidyverse</h2>
<p>The Tidyverse is a collection of R packages designed for data science. One of its core packages is <code>dplyr</code>, which provides functions for data manipulation.</p>
<section id="basic-verbs" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="basic-verbs"><span class="header-section-number">6.3.1</span> Basic Verbs</h3>
<ul>
<li><code>select()</code>: Choose columns.</li>
<li><code>filter()</code>: Choose rows based on values.</li>
<li><code>mutate()</code>: Add or modify columns.</li>
<li><code>arrange()</code>: Sort the data.</li>
<li><code>summarize()</code>: Collapse data into a summary.</li>
</ul>
</section>
<section id="piping" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="piping"><span class="header-section-number">6.3.2</span> Piping</h3>
<ul>
<li><code>%&gt;%</code>: Allows for chaining commands, making code more readable.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;</span> <span class="dv">28</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Name Age
1 Charlie  29
2     Bob  30</code></pre>
</div>
</div>
</section>
<section id="joins" class="level3" data-number="6.3.3">
<h3 data-number="6.3.3" class="anchored" data-anchor-id="joins"><span class="header-section-number">6.3.3</span> Joins</h3>
<ul>
<li><code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, and <code>full_join()</code>.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(data2, <span class="at">by =</span> <span class="st">"Name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Name Age Score
1   Alice  25    85
2     Bob  30    90
3 Charlie  29    NA</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="data.table" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="data.table"><span class="header-section-number">6.4</span> data.table</h2>
<p>The <code>data.table</code> package provides an enhanced version of <code>data.frame</code> that allows for fast and memory-efficient operations.</p>
<section id="basic-operations" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="basic-operations"><span class="header-section-number">6.4.1</span> Basic Operations</h3>
<ul>
<li><code>DT[i, j, by]</code>: A simple syntax where <code>i</code> is for row subsetting, <code>j</code> for column operations, and <code>by</code> for grouping.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    between, first, last</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(data)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>DT[Age <span class="sc">&gt;</span> <span class="dv">28</span>, .(Name, Age)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      Name Age
1:     Bob  30
2: Charlie  29</code></pre>
</div>
</div>
</section>
<section id="joins-in-data.table" class="level3" data-number="6.4.2">
<h3 data-number="6.4.2" class="anchored" data-anchor-id="joins-in-data.table"><span class="header-section-number">6.4.2</span> Joins in data.table</h3>
<ul>
<li>Joins are done using the same <code>[.data.table</code> syntax.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>DT2 <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(data2)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>DT[DT2, on <span class="ot">=</span> .(Name)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    Name Age Score
1: Alice  25    85
2:   Bob  30    90</code></pre>
</div>
</div>
</section>
<section id="set-operations" class="level3" data-number="6.4.3">
<h3 data-number="6.4.3" class="anchored" data-anchor-id="set-operations"><span class="header-section-number">6.4.3</span> Set Operations</h3>
<ul>
<li>Functions like <code>setkey()</code>, <code>setorder()</code>, and others that modify data by reference, making them very fast.</li>
</ul>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setorder</span>(DT, Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><strong>Note</strong>: While base R provides the foundational understanding of data manipulation, <code>dplyr</code> (from Tidyverse) and <code>data.table</code> offer more concise and, often, faster approaches. Knowing all three methods can be beneficial depending on the context and specific needs of a data manipulation task.</p>
</section>
</section>
<section id="exercise-session-data-manipulation-in-r" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="exercise-session-data-manipulation-in-r"><span class="header-section-number">6.5</span> Exercise Session: Data Manipulation in R</h2>
<hr>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Solutions</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p><strong>Question 1: Base R - Data Manipulation</strong></p>
<p><strong>a) In-Class:</strong><br>
Using the built-in dataset <code>mtcars</code>, subset the data to only include cars (<code>row.names</code>) that have a miles-per-gallon (<code>mpg</code>) value greater than 25 and display the results.</p>
<p><strong>b) Take Home:</strong><br>
For the same <code>mtcars</code> dataset, sort the cars based on their horsepower (<code>hp</code>) in descending order. How does the sorted dataset look?</p>
<hr>
<p><strong>Question 2: Tidyverse (dplyr) - Data Transformation</strong></p>
<p><strong>a) In-Class:</strong><br>
Load the <code>dplyr</code> package and use the <code>filter()</code> function to select rows from the <code>iris</code> dataset where <code>Sepal.Length</code> is greater than 5 and <code>Species</code> is “setosa”.</p>
<p><strong>b) Take Home:</strong><br>
Using the <code>mutate()</code> function, add a new column to the <code>iris</code> dataset called <code>Sepal.Ratio</code> which is the ratio of <code>Sepal.Length</code> to <code>Sepal.Width</code>. Display the first 10 rows of the updated dataset.</p>
<hr>
<p><strong>Question 3: data.table - Fast Data Manipulation</strong></p>
<p><strong>a) In-Class:</strong><br>
Convert the built-in dataset <code>airquality</code> to a <code>data.table</code> object. Then, filter the rows to only include observations from the month of May (<code>Month == 5</code>).</p>
<p><strong>b) Take Home:</strong><br>
Group the <code>airquality</code> data by <code>Month</code> and calculate the average temperature (<code>Temp</code>) for each month. Which month had the highest average temperature?</p>
<hr>
<p><strong>Question 4: Advanced Manipulation (Challenging)</strong></p>
<p>Using the <code>diamonds</code> dataset from the <code>ggplot2</code> package:</p>
<ol type="1">
<li>Convert the data to a <code>data.table</code> object.</li>
<li>Filter the data to only include diamonds with a <code>cut</code> of “Premium” or “Ideal”.</li>
<li>Create a new column <code>price_per_carat</code> which is the ratio of <code>price</code> to <code>carat</code>.</li>
<li>For each <code>color</code> of diamond, determine the average <code>price_per_carat</code>.</li>
<li>Using base R or dplyr, determine which color of diamond, on average, has the highest price per carat.</li>
</ol>
<hr>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><strong>Solution for Question 1: Base R - Data Manipulation</strong></p>
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>subset_mtcars <span class="ot">&lt;-</span> mtcars[mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">25</span>, ]</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(subset_mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>sorted_mtcars <span class="ot">&lt;-</span> mtcars[<span class="fu">order</span>(<span class="sc">-</span>mtcars<span class="sc">$</span>hp), ]</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(sorted_mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 2: Tidyverse (dplyr) - Data Transformation</strong></p>
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>filtered_iris <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sepal.Length <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> Species <span class="sc">==</span> <span class="st">"setosa"</span>)</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(filtered_iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           5.1         3.5          1.4         0.2  setosa
2           5.4         3.9          1.7         0.4  setosa
3           5.4         3.7          1.5         0.2  setosa
4           5.8         4.0          1.2         0.2  setosa
5           5.7         4.4          1.5         0.4  setosa
6           5.4         3.9          1.3         0.4  setosa
7           5.1         3.5          1.4         0.3  setosa
8           5.7         3.8          1.7         0.3  setosa
9           5.1         3.8          1.5         0.3  setosa
10          5.4         3.4          1.7         0.2  setosa
11          5.1         3.7          1.5         0.4  setosa
12          5.1         3.3          1.7         0.5  setosa
13          5.2         3.5          1.5         0.2  setosa
14          5.2         3.4          1.4         0.2  setosa
15          5.4         3.4          1.5         0.4  setosa
16          5.2         4.1          1.5         0.1  setosa
17          5.5         4.2          1.4         0.2  setosa
18          5.5         3.5          1.3         0.2  setosa
19          5.1         3.4          1.5         0.2  setosa
20          5.1         3.8          1.9         0.4  setosa
21          5.1         3.8          1.6         0.2  setosa
22          5.3         3.7          1.5         0.2  setosa</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>iris_with_ratio <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Ratio =</span> Sepal.Length <span class="sc">/</span> Sepal.Width)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(iris_with_ratio, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal.Ratio
1           5.1         3.5          1.4         0.2  setosa    1.457143
2           4.9         3.0          1.4         0.2  setosa    1.633333
3           4.7         3.2          1.3         0.2  setosa    1.468750
4           4.6         3.1          1.5         0.2  setosa    1.483871
5           5.0         3.6          1.4         0.2  setosa    1.388889
6           5.4         3.9          1.7         0.4  setosa    1.384615
7           4.6         3.4          1.4         0.3  setosa    1.352941
8           5.0         3.4          1.5         0.2  setosa    1.470588
9           4.4         2.9          1.4         0.2  setosa    1.517241
10          4.9         3.1          1.5         0.1  setosa    1.580645</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 3: data.table - Fast Data Manipulation</strong></p>
<p><strong>a) In-Class:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>airquality_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(airquality)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>may_data <span class="ot">&lt;-</span> airquality_dt[Month <span class="sc">==</span> <span class="dv">5</span>]</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(may_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    Ozone Solar.R Wind Temp Month Day
 1:    41     190  7.4   67     5   1
 2:    36     118  8.0   72     5   2
 3:    12     149 12.6   74     5   3
 4:    18     313 11.5   62     5   4
 5:    NA      NA 14.3   56     5   5
 6:    28      NA 14.9   66     5   6
 7:    23     299  8.6   65     5   7
 8:    19      99 13.8   59     5   8
 9:     8      19 20.1   61     5   9
10:    NA     194  8.6   69     5  10
11:     7      NA  6.9   74     5  11
12:    16     256  9.7   69     5  12
13:    11     290  9.2   66     5  13
14:    14     274 10.9   68     5  14
15:    18      65 13.2   58     5  15
16:    14     334 11.5   64     5  16
17:    34     307 12.0   66     5  17
18:     6      78 18.4   57     5  18
19:    30     322 11.5   68     5  19
20:    11      44  9.7   62     5  20
21:     1       8  9.7   59     5  21
22:    11     320 16.6   73     5  22
23:     4      25  9.7   61     5  23
24:    32      92 12.0   61     5  24
25:    NA      66 16.6   57     5  25
26:    NA     266 14.9   58     5  26
27:    NA      NA  8.0   57     5  27
28:    23      13 12.0   67     5  28
29:    45     252 14.9   81     5  29
30:   115     223  5.7   79     5  30
31:    37     279  7.4   76     5  31
    Ozone Solar.R Wind Temp Month Day</code></pre>
</div>
</div>
<p><strong>b) Take Home:</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>avg_temp <span class="ot">&lt;-</span> airquality_dt[, .(<span class="at">Average_Temp =</span> <span class="fu">mean</span>(Temp)), by <span class="ot">=</span> Month]</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>highest_temp_month <span class="ot">&lt;-</span> avg_temp[<span class="fu">which.max</span>(Average_Temp)]</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(highest_temp_month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Month Average_Temp
1:     8     83.96774</code></pre>
</div>
</div>
<hr>
<p><strong>Solution for Question 4: Advanced Manipulation</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure ggplot2 is available for the diamonds dataset</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("ggplot2") </span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Convert the data to a data.table object</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>diamonds_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(diamonds)</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Filter the data</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>filtered_diamonds <span class="ot">&lt;-</span> diamonds_dt[cut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Premium"</span>, <span class="st">"Ideal"</span>)]</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Create a new column</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>filtered_diamonds[, price_per_carat <span class="sc">:</span><span class="er">=</span> price<span class="sc">/</span>carat]</span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Determine the average price_per_carat for each color</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a>avg_price_per_carat <span class="ot">&lt;-</span> filtered_diamonds[, .(<span class="at">Average_Price_Per_Carat =</span> <span class="fu">mean</span>(price_per_carat)), by <span class="ot">=</span> color]</span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Determine which color of diamond has the highest average price per carat</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>highest_avg_price_color <span class="ot">&lt;-</span> avg_price_per_carat[<span class="fu">which.max</span>(Average_Price_Per_Carat)]</span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(highest_avg_price_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   color Average_Price_Per_Carat
1:     G                4222.609</code></pre>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="comprehensive-project-for-today" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Comprehensive Project for Today</h1>
<hr>
<section id="project-overview" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="project-overview"><span class="header-section-number">7.1</span> <strong>Project Overview</strong></h2>
<p>In this project, you will be tasked with analyzing a dataset, implementing custom functions, applying control structures, and performing basic data manipulation to derive insights from the data. The objective is to cement the understanding of the core topics covered in the class.</p>
<hr>
</section>
<section id="dataset-mtcars" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="dataset-mtcars"><span class="header-section-number">7.2</span> <strong>Dataset</strong>: <code>mtcars</code></h2>
<p>The <code>mtcars</code> dataset is a built-in dataset in R, which comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973–74 models).</p>
<hr>
</section>
<section id="tasks" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="tasks"><span class="header-section-number">7.3</span> <strong>Tasks</strong></h2>
<section id="data-exploration-and-cleaning" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="data-exploration-and-cleaning"><span class="header-section-number">7.3.1</span> <strong>Data Exploration and Cleaning</strong></h3>
<p><strong>Objective:</strong> Familiarize yourself with the dataset and ensure it’s clean.</p>
<ol type="a">
<li>Load the <code>mtcars</code> dataset and display the first few rows.<br>
</li>
<li>Check for any missing values in the dataset. If there are any, handle them appropriately.</li>
</ol>
</section>
<section id="custom-function-creation" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="custom-function-creation"><span class="header-section-number">7.3.2</span> <strong>Custom Function Creation</strong></h3>
<p><strong>Objective:</strong> Develop functions that will assist in analyzing the dataset.</p>
<ol type="a">
<li><p>Create a function named <code>describe_data</code> that takes in a column (numeric vector) and returns a list with the mean, median, minimum, and maximum of the column.</p></li>
<li><p>Create a function named <code>cyl_distribution</code> that takes the <code>mtcars</code> dataset as input and returns the number of cars for each unique value of the <code>cyl</code> column.</p></li>
</ol>
</section>
<section id="control-structures-1" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="control-structures-1"><span class="header-section-number">7.3.3</span> <strong>Control Structures</strong></h3>
<p><strong>Objective:</strong> Apply control structures to categorize data.</p>
<ol type="a">
<li><p>Write a loop that iterates over each column in <code>mtcars</code>. If the column is numeric, apply the <code>describe_data</code> function and print the results.</p></li>
<li><p>Using an <code>if-else</code> construct, categorize cars in <code>mtcars</code> based on their <code>mpg</code> values:</p></li>
</ol>
<ul>
<li>mpg &gt; 20: “Efficient”</li>
<li>mpg between 15 and 20: “Moderate”</li>
<li>mpg &lt; 15: “Inefficient”</li>
</ul>
<p>Store these categories in a new column in the dataset named <code>efficiency</code>.</p>
</section>
<section id="data-manipulation-1" class="level3" data-number="7.3.4">
<h3 data-number="7.3.4" class="anchored" data-anchor-id="data-manipulation-1"><span class="header-section-number">7.3.4</span> <strong>Data Manipulation</strong></h3>
<p><strong>Objective:</strong> Use the base R functions, <code>dplyr</code> (from Tidyverse), and <code>data.table</code> to manipulate the <code>mtcars</code> dataset.</p>
<ol type="a">
<li><p>Using base R, filter out all cars with 4 cylinders (<code>cyl</code> column) and order them based on <code>mpg</code> in descending order.</p></li>
<li><p>Using <code>dplyr</code>, group the cars by the number of gears (<code>gear</code> column) and calculate the average miles per gallon (<code>mpg</code>) for each group.</p></li>
<li><p>Convert the <code>mtcars</code> dataset into a <code>data.table</code> object and calculate the standard deviation of <code>hp</code> (horsepower) for cars grouped by their <code>efficiency</code> category.</p></li>
</ol>
</section>
</section>
<section id="solutions-3" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="solutions-3"><span class="header-section-number">7.4</span> Solutions</h2>
<p>You can find the solution <a href="https://github.com/lfr00154/R-review2023/blob/235c337609a8ffd8f5b5accb70dfd6c7b5216f89/lec2/lec2proj_sol.R">here</a>.</p>
<hr>
</section>
</section>
<section id="for-tomorrow" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> For Tomorrow</h1>
<ul>
<li><p>More Data Manipulation, especially using data from outside</p></li>
<li><p>First Lecture with simulations and econometrics</p></li>
<li><p>Simple Data Visualization: ggplot2</p></li>
<li><p>First in-class Comprehensive Project</p></li>
</ul>
<hr>
</section>
<section id="appendix" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Appendix</h1>
<section id="apply-family-table-sytax-table" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="apply-family-table-sytax-table"><span class="header-section-number">9.1</span> Apply Family Table Sytax Table</h2>
<table class="table">
<colgroup>
<col style="width: 7%">
<col style="width: 59%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
<th>Syntax</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>lapply</code></td>
<td>Applies a function to each element of a list/vector and returns a list.</td>
<td><code>lapply(X, FUN, ...)</code></td>
</tr>
<tr class="even">
<td><code>sapply</code></td>
<td>Similar to <code>lapply</code> but tries to simplify the result (e.g., to a vector).</td>
<td><code>sapply(X, FUN, ...)</code></td>
</tr>
<tr class="odd">
<td><code>vapply</code></td>
<td>Similar to <code>sapply</code>, but has a specified type of return value for safety.</td>
<td><code>vapply(X, FUN, FUN.VALUE, ...)</code></td>
</tr>
<tr class="even">
<td><code>apply</code></td>
<td>Applies a function to the rows or columns of a matrix.</td>
<td><code>apply(X, MARGIN, FUN, ...)</code></td>
</tr>
<tr class="odd">
<td><code>tapply</code></td>
<td>Applies a function to subsets of a vector and returns an array.</td>
<td><code>tapply(X, INDEX, FUN, ..., default = NA)</code></td>
</tr>
<tr class="even">
<td><code>mapply</code></td>
<td>Multivariate version of <code>lapply</code>. Applies a function in parallel over arguments.</td>
<td><code>mapply(FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE)</code></td>
</tr>
<tr class="odd">
<td><code>rapply</code></td>
<td>Recursive version of <code>lapply</code> for nested lists.</td>
<td><code>rapply(object, f, classes, how, ...)</code></td>
</tr>
</tbody>
</table>
<p>This table provides a concise overview of the <code>apply</code> family functions’ syntax in R.</p>
<hr>
</section>
</section>
<section id="reference" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Reference</h1>
<ul>
<li><p><a href="https://cran.r-project.org/doc/manuals/R-intro.pdf">An Introduction to R</a></p></li>
<li><p><a href="https://bookdown.org/yih_huynh/Guide-to-R-Book/">R for Graduate Student</a></p></li>
<li><p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a></p></li>
<li><p><a href="https://www.econometrics-with-r.org/index.html">Introduction to Econometrics with R</a></p></li>
<li><p><a href="https://libguides.bates.edu/r/r-for-economics">R for Economics</a></p></li>
<li><p><a href="https://rkabacoff.github.io/datavis/datavis.pdf">Data Visualization with R</a></p></li>
<li><p>Dr.&nbsp;Qingxiao Li’s notes for R-Review 2020</p></li>
<li><p>Rodrigo Franco’s notes for R-Review 2021</p></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Lifeng Ren</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lfr00154/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>